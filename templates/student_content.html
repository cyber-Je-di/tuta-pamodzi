{% extends "base.html" %}

{% block title %}My Content Access{% endblock %}

{% block content %}
    <h1>Welcome, {{ current_user.full_name }}!</h1>
    <h2>Access Authorized Content ({{ current_user.university.name if current_user.university else 'No University Assigned' }})</h2>
    <p style="color: var(--color-text-secondary);">You currently have **full access** to all available course documents relevant to your university because your profile is approved and your monthly payment has been recorded by your Tutor.</p>

    {% if documents_by_course %}
        {% for course_name, documents in documents_by_course.items() %}
            <div class="card" style="border-left: 5px solid var(--color-primary); margin-bottom: 20px;">
                <h3>ðŸ“š {{ course_name }} ({{ documents|length }} Documents)</h3>
                <ul style="list-style-type: none; padding: 0;">
                    {% for doc in documents %}
                        <li style="border-bottom: 1px dotted var(--color-border); padding: 10px 0;">
                            <p style="margin: 0 0 5px 0;"><strong>{{ doc.title }}</strong> - Uploaded by <span style="color: var(--color-primary);">{{ doc.uploader_tutor.full_name }}</span> on <span style="color: var(--color-text-secondary);">{{ doc.upload_date.strftime('%Y-%m-%d') }}</span></p>
                            <a href="{{ url_for('main.download_document', document_id=doc.id) }}" class="btn btn-success" style="padding: 5px 10px;">Download</a>
                        </li>
                    {% endfor %}
                </ul>
            </div>
        {% endfor %}
    {% else %}
        <div class="flash info" style="border: 1px solid var(--color-info); padding: 20px;">
            <p>No documents found for your assigned university courses yet. Please check back later or contact your Tutor for uploads.</p>
        </div>
    {% endif %}

{% endblock %}