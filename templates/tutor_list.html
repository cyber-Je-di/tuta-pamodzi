{% extends "base.html" %}

{% block title %}Find Your Tutor{% endblock %}

{% block content %}
    <h1>Available Tutors (Performance Ranking)</h1>
    <p style="color: var(--color-text-secondary);">View the aggregated performance scores based on student reviews.</p>

    <table>
        <thead>
            <tr>
                <th>Tutor Name</th>
                <th>Overall Rating</th>
                <th>Total Reviews</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            {% for user, avg_rating, total_reviews in tutors_with_stats %}
            <tr>
                <td><strong>{{ user.full_name }}</strong></td>
                <td>
                    {% if total_reviews > 0 %}
                        <strong style="color: var(--color-accent);">{{ "%.2f"|format(avg_rating) }} / 5</strong>
                    {% else %}
                        <span style="color: var(--color-text-secondary);">No Rating</span>
                    {% endif %}
                </td>
                <td>{{ total_reviews }}</td>
                <td>
                    <a href="{{ url_for('main.view_tutor_profile', tutor_id=user.id) }}" class="btn btn-success" style="padding: 8px 15px;">View Profile</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}