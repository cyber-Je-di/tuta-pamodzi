{% extends "base.html" %}

{% block title %}Upload Document{% endblock %}

{% block content %}
    <h1>Upload Course Document</h1>
    <p>Upload lecture notes, assignments, or past papers into the appropriate University and Course category.</p>
    
    <form method="POST" action="{{ url_for('tutor.upload_document') }}" enctype="multipart/form-data">
        
        <div>
            <label for="title">Document Title</label>
            <input type="text" id="title" name="title" required>
        </div>
        
        <div>
            <label for="course_id">Select Course Category (University -> Category -> Course)</label>
            <select id="course_id" name="course_id" required>
                <option value="0">--- Select Course ---</option>
                {% set current_university_id = 0 %}
                {% set current_category_id = 0 %}
                
                {% for course in course_structure %}
                    {% if course.category.university_id != current_university_id %}
                        {% if not loop.first %}</optgroup>{% endif %}
                        <optgroup label="{{ course.category.university.name }}">
                        {% set current_university_id = course.category.university_id %}
                    {% endif %}
                    
                    {% if course.category_id != current_category_id %}
                        <option value="" disabled style="font-weight: bold; background-color: #eee;">&nbsp;&nbsp;&nbsp;-- {{ course.category.name }} --</option>
                        {% set current_category_id = course.category_id %}
                    {% endif %}
                    
                    <option value="{{ course.id }}">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{ course.name }}</option>
                {% endfor %}
                {% if course_structure %}</optgroup>{% endif %}
            </select>
        </div>
        
        <div>
            <label for="file">Select File (PDF, DOC, DOCX)</label>
            <input type="file" id="file" name="file" accept=".pdf, .doc, .docx" required>
        </div>
        
        <div>
            <input type="submit" value="Upload Document" style="background-color: #007bff;">
        </div>
    </form>
{% endblock %}