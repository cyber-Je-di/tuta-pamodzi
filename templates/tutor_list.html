{% extends "base.html" %}

{% block title %}Find Your Tutor{% endblock %}

{% block content %}
    <h1>Available Tutors (Performance Ranking)</h1>
    <p>View the aggregated performance scores based on student reviews.</p>

    <table style="width: 100%; border-collapse: collapse;">
        <thead>
            <tr style="background-color: #007bff; color: white;">
                <th>Tutor Name</th>
                <th>Overall Rating</th>
                <th>Total Reviews</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            {% for user, avg_rating, total_reviews in tutors_with_stats %}
            <tr style="border-bottom: 1px solid #ddd;">
                <td><strong>{{ user.full_name }}</strong></td>
                <td>
                    {% if total_reviews > 0 %}
                        <strong style="color: gold;">{{ "%.2f"|format(avg_rating) }} / 5</strong>
                    {% else %}
                        No Rating
                    {% endif %}
                </td>
                <td>{{ total_reviews }}</td>
                <td>
                    <a href="{{ url_for('main.view_tutor_profile', tutor_id=user.id) }}" class="btn" style="background-color: #28a745; color: white; padding: 5px 10px;">View Profile</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}